- pipeline: "Deploy"
  events:
    - type: "PUSH"
      refs:
        - "refs/heads/main"
  actions:
    - action: "install supervisor"
      type: "BUILD"
      docker_image_name: "library/python"
      docker_image_tag: "3.12"
      execute_commands:
        - "apt-get update && apt-get install -y supervisor"
        - "pip install --root-user-action=ignore -r requirements.txt"
        - "mkdir -p /etc/supervisor/"
        - "cp /path/to/your/supervisord.conf /etc/supervisor/supervisord.conf"
        - "supervisord -c /etc/supervisor/supervisord.conf &"  # Menjalankan supervisord di background
        - "echo 'Supervisor started successfully'"  # Menampilkan pesan sukses
      cached_dirs:
        - "/root/.cache/pip"
      shell: "BASH"
      execute_every_command: true
